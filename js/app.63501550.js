(function(n){function e(e){for(var i,s,o=e[0],c=e[1],u=e[2],l=0,v=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(n[i]=c[i]);d&&d(e);while(v.length)v.shift()();return r.push.apply(r,u||[]),t()}function t(){for(var n,e=0;e<r.length;e++){for(var t=r[e],i=!0,o=1;o<t.length;o++){var c=t[o];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),n=s(s.s=t[0]))}return n}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=n,s.c=i,s.d=function(n,e,t){s.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},s.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},s.t=function(n,e){if(1&e&&(n=s(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)s.d(t,i,function(e){return n[e]}.bind(null,i));return t},s.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return s.d(e,"a",e),e},s.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=c;r.push([0,"chunk-vendors"]),t()})({0:function(n,e,t){n.exports=t("cd49")},"01b7":function(n,e,t){},"5c0b":function(n,e,t){"use strict";t("9c0c")},7454:function(n,e,t){"use strict";t("01b7")},7502:function(n,e,t){},9950:function(n,e,t){"use strict";t("7502")},"9c0c":function(n,e,t){},a726:function(n,e,t){"use strict";t("df08")},cd49:function(n,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var i,a=t("2b0e"),r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"nav"},[t("router-link",{attrs:{to:"/"}},[n._v("About")]),t("router-link",{attrs:{to:"/circuit-simulator"}},[n._v("Circuit simulator")])],1),t("div",{staticClass:"wrapper"},[t("router-view")],1)])},s=[],o=(t("5c0b"),t("9950"),t("2877")),c={},u=Object(o["a"])(c,r,s,!1,null,"501f77f0",null),d=u.exports,l=t("8c4f"),v=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"wrapper"},[n._v(" Project description goes hereâ€¦ ")])},f=[],p={name:"About"},h=p,b=(t("7454"),Object(o["a"])(h,v,f,!1,null,"6fc38f64",null)),g=b.exports,y=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"circuit-simulator"},[t("div",{directives:[{name:"show",rawName:"v-show",value:n.editDefinitionMode,expression:"editDefinitionMode"}],staticClass:"definition"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.definition,expression:"definition"}],domProps:{value:n.definition},on:{input:function(e){e.target.composing||(n.definition=e.target.value)}}}),n._v(" "),t("button",{on:{click:n.loadDefinition}},[n._v(" Load ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.editDefinitionMode,expression:"!editDefinitionMode"}],staticClass:"simulator"},[t("div",{ref:"cytoscape",staticClass:"cytoscape-container"}),t("div",{staticClass:"controls"},[t("button",{on:{click:n.loadDefinition}},[n._v(" Reset ")]),t("button",{staticClass:"run",on:{click:n.run}},[n._v(" Run ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:n.graphDisplayDepth,expression:"graphDisplayDepth"}],attrs:{placeholder:"Graph display depth"},domProps:{value:n.graphDisplayDepth},on:{input:function(e){e.target.composing||(n.graphDisplayDepth=e.target.value)}}})])])])},O=[],j=t("b85c"),m=t("d4ec"),w=(t("b0c0"),t("d3b7"),t("6062"),t("3ca3"),t("ddb0"),t("4ec9"),t("a630"),t("99af"),t("bee2")),k=t("262e"),I=t("2caf"),D=t("ec26"),P=function n(){Object(m["a"])(this,n),this.id=Object(D["a"])()};(function(n){n[n["LOW"]=0]="LOW",n[n["HIGH"]=1]="HIGH"})(i||(i={}));var A=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this),r.engine=n,r.device=a,r.name=i,r.signal=void 0,r}return Object(w["a"])(t,[{key:"getSignal",value:function(){var n;return null!==(n=this.engine.getSignalFromLinkedPin(this))&&void 0!==n?n:this.signal}},{key:"propagate",value:function(){var n=this.engine.getSignalFromLinkedPin(this);return void 0===n||this.signal!==n&&(this.signal=n,null==this.device||!this.device.hasCustomLogic||(this.engine.propagate(this.device),!1))}}]),t}(P),L=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(){return Object(m["a"])(this,t),e.apply(this,arguments)}return Object(w["a"])(t,[{key:"setSignal",value:function(n){n!==this.signal&&(this.signal=n,this.engine.propagate([this]))}}]),t}(A),C=t("e1f8"),B=t("2909"),S=t("3835"),x=t("9072"),_=(t("96cf"),t("a434"),t("7db0"),t("d81d"),t("9ab4")),M=function(n,e){throw new n(e)},H=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(){return Object(m["a"])(this,t),e.apply(this,arguments)}return t}(Object(x["a"])(Error)),E=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(){return Object(m["a"])(this,t),e.apply(this,arguments)}return t}(Object(x["a"])(Error)),W=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(){return Object(m["a"])(this,t),e.apply(this,arguments)}return t}(Object(x["a"])(Error)),$=function(n){return new Promise((function(e){return setTimeout(e,n)}))},G=function(){function n(){Object(m["a"])(this,n),this.queue=[],this.pinsLinks=new Map,this.pinsLinksInverted=new Map,this.devicesConstructors=new Map}return Object(w["a"])(n,[{key:"run",value:function(n,e,t){var i;return Object(_["a"])(this,void 0,void 0,regeneratorRuntime.mark((function a(){var r,s,o,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=null!==t&&void 0!==t?t:4*this.pinsLinks.size;case 1:if(!(this.queue.length>0&&r-- >0)){a.next=11;break}if(s=this.queue.splice(0,1),o=Object(S["a"])(s,1),c=o[0],c.propagate()&&c instanceof A&&(u=this.queue).push.apply(u,Object(B["a"])(null!==(i=this.pinsLinks.get(c))&&void 0!==i?i:[])),d=!0,void 0!==n&&(d=d&&n(c)),void 0===e||!d){a.next=9;break}return a.next=9,$(e);case 9:a.next=1;break;case 11:return a.abrupt("return",0===this.queue.length);case 12:case"end":return a.stop()}}),a,this)})))}},{key:"propagate",value:function(n){var e;(e=this.queue).push.apply(e,Object(B["a"])(Array.isArray(n)?n:[n]))}},{key:"linkPins",value:function(n,e){var t;if(this.pinsLinksInverted.has(e))throw new H("There is a link already defined with dst ".concat(e.name));var i=null!==(t=this.pinsLinks.get(n))&&void 0!==t?t:[];if(-1!==i.indexOf(e))throw new H("There is a link already defined between ".concat(n.name," and ").concat(e.name));i.push(e),this.pinsLinksInverted.set(e,n),this.pinsLinks.set(n,i)}},{key:"getSignalFromLinkedPin",value:function(n){var e;return null===(e=this.pinsLinksInverted.get(n))||void 0===e?void 0:e.getSignal()}},{key:"registerDeviceConstructor",value:function(n){var e=n.name;if(this.devicesConstructors.has(e))throw new E("Duplicate device constructor name ".concat(e," specified"));this.devicesConstructors.set(e,n)}},{key:"loadDefinition",value:function(n){var e,t,i;q(n);var a,r=new Map,s=Object(j["a"])(n.pins);try{for(s.s();!(a=s.n()).done;){var o=a.value,c=new L(this,null!==(e=o.name)&&void 0!==e?e:"pin-".concat(r.size));if(void 0!==o.signal&&c.setSignal(o.signal),r.has(o.id))throw new Error("Multiple pins with same id ".concat(o.id," found"));r.set(o.id,c)}}catch(w){s.e(w)}finally{s.f()}var u,d=new Map,l=Object(j["a"])(n.devices);try{for(l.s();!(u=l.n()).done;){var v=u.value,f=null!==(t=this.devicesConstructors.get(v.type))&&void 0!==t?t:M(W,"Unknown device type specified ".concat(v.type)),p=new f(this,null!==(i=v.name)&&void 0!==i?i:v.type);if(d.has(v.id))throw new Error("Duplicate device id ".concat(v.id," specified"));d.set(v.id,p)}}catch(w){l.e(w)}finally{l.f()}var h,b=function(n){var e,t,i,a=n.indexOf(".");if(-1===a)return null!==(e=r.get(n))&&void 0!==e?e:M(W,"Ping with specified id ".concat(n," not found"));var s=n.substring(0,a),o=null!==(t=d.get(s))&&void 0!==t?t:M(W,"Device with specified id ".concat(s," not found")),c=o.getPins(),u=n.substring(a+1);return null!==(i=c.find((function(n){return n.name===u})))&&void 0!==i?i:M(W,"Pin with name ".concat(u," not found in device ").concat(s))},g=Object(j["a"])(n.links);try{for(g.s();!(h=g.n()).done;){var y=h.value,O=b(y.srcId),m=b(y.dstId);this.linkPins(O,m)}}catch(w){g.e(w)}finally{g.f()}}},{key:"getPins",value:function(){var n=new Set([].concat(Object(B["a"])(Array.from(this.pinsLinks.keys())),Object(B["a"])(Array.from(this.pinsLinksInverted.keys()))));return Array.from(n)}},{key:"getLinks",value:function(){return Array.from(this.pinsLinksInverted.entries()).map((function(n){var e=Object(S["a"])(n,2),t=e[0],i=e[1];return{src:i,dst:t}}))}}]),n}(),N=C["a"].object({devices:C["a"].array(C["a"].object({type:C["a"].string().nonempty(),name:C["a"].string().optional(),id:C["a"].string().nonempty()})).nonempty(),pins:C["a"].array(C["a"].object({id:C["a"].string().nonempty(),name:C["a"].string().optional(),signal:C["a"].number().lte(i.HIGH).gte(i.LOW).optional()})).nonempty(),links:C["a"].array(C["a"].object({srcId:C["a"].string().nonempty(),dstId:C["a"].string().nonempty()})).nonempty()}),q=function(n){try{N.parse(n)}catch(e){throw new W("Invalid circuit definition")}},T=function(n){try{return N.parse(JSON.parse(n))}catch(e){throw new W("String is not valid circuit definition")}},J=t("44e1"),R=t.n(J),F=t("f81a"),z=t.n(F),U=t("b17d"),K=t.n(U),Q=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this),r.engine=n,r.name=i,r.device=a,r}return t}(P),V=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(){var n;return Object(m["a"])(this,t),n=e.apply(this,arguments),n.hasCustomLogic=!0,n}return Object(w["a"])(t,[{key:"getDevices",value:function(){return[]}}]),t}(Q),X=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(){var n;return Object(m["a"])(this,t),n=e.apply(this,arguments),n.hasCustomLogic=!1,n}return Object(w["a"])(t,[{key:"propagate",value:function(){return!1}}]),t}(Q),Y=t("257e"),Z=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this,n,i,a),r.inA=new A(n,"in-a",Object(Y["a"])(r)),r.inB=new A(n,"in-b",Object(Y["a"])(r)),r.out=new L(n,"out",Object(Y["a"])(r)),r}return Object(w["a"])(t,[{key:"propagate",value:function(){var n=this.inA.getSignal(),e=this.inB.getSignal();return this.out.setSignal(n===i.LOW||e===i.LOW||n!==e?i.HIGH:i.LOW),!1}},{key:"getPins",value:function(){return[this.inA,this.inB,this.out]}}]),t}(V),nn=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this,n,i,a),r.nand=new Z(n,"nand",Object(Y["a"])(r)),r.in=new A(n,"in",Object(Y["a"])(r)),r.out=new A(n,"out",Object(Y["a"])(r)),r.engine.linkPins(r.in,r.nand.inA),r.engine.linkPins(r.in,r.nand.inB),r.engine.linkPins(r.nand.out,r.out),r}return Object(w["a"])(t,[{key:"getDevices",value:function(){return[this.nand]}},{key:"getPins",value:function(){return[this.in,this.out]}}]),t}(X),en=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this,n,i,a),r.inA=new A(n,"inA",Object(Y["a"])(r)),r.inB=new A(n,"inB",Object(Y["a"])(r)),r.out=new A(n,"out",Object(Y["a"])(r)),r}return Object(w["a"])(t,[{key:"getPins",value:function(){return[this.inA,this.inB,this.out]}}]),t}(X),tn=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this,n,i,a),r.nand=new Z(n,"nand",Object(Y["a"])(r)),r.not=new nn(n,"not",Object(Y["a"])(r)),r.engine.linkPins(r.inA,r.nand.inA),r.engine.linkPins(r.inB,r.nand.inB),r.engine.linkPins(r.nand.out,r.not.in),r.engine.linkPins(r.not.out,r.out),r}return Object(w["a"])(t,[{key:"getDevices",value:function(){return[this.nand,this.not]}}]),t}(en),an=function(n){Object(k["a"])(t,n);var e=Object(I["a"])(t);function t(n,i,a){var r;return Object(m["a"])(this,t),r=e.call(this,n,i,a),r.nand=new Z(n,"nand",Object(Y["a"])(r)),r.notA=new nn(n,"notA",Object(Y["a"])(r)),r.notB=new nn(n,"notB",Object(Y["a"])(r)),r.engine.linkPins(r.inA,r.notA.in),r.engine.linkPins(r.inB,r.notB.in),r.engine.linkPins(r.notA.out,r.nand.inA),r.engine.linkPins(r.notB.out,r.nand.inB),r.engine.linkPins(r.nand.out,r.out),r}return Object(w["a"])(t,[{key:"getDevices",value:function(){return[this.nand,this.notA,this.notB]}}]),t}(en),rn={pins:[{id:"src-a",name:"srcA",signal:i.LOW},{id:"src-b",name:"srcB",signal:i.HIGH},{id:"src-c",name:"srcC",signal:i.HIGH},{id:"src-d",name:"srcD",signal:i.LOW},{id:"dst",name:"dst"}],devices:[{type:"And",id:"and-a-b"},{type:"Not",id:"not-d"},{type:"And",id:"and-c-d"},{type:"Or",id:"or"}],links:[{srcId:"src-a",dstId:"and-a-b.inA"},{srcId:"src-b",dstId:"and-a-b.inB"},{srcId:"src-c",dstId:"and-c-d.inA"},{srcId:"src-d",dstId:"not-d.in"},{srcId:"not-d.out",dstId:"and-c-d.inB"},{srcId:"and-a-b.out",dstId:"or.inA"},{srcId:"and-c-d.out",dstId:"or.inB"},{srcId:"or.out",dstId:"dst"}]},sn=function n(){Object(m["a"])(this,n),this.name="dagre",this.nodeDimensionsIncludeLabels=!0},on=a["a"].extend({name:"CircuitSimulator",data:function(){return{definition:JSON.stringify(rn,null,2),editDefinitionMode:!0,graphDisplayDepth:"1",simulationInterval:"100"}},mounted:function(){R.a.use(z.a),R.a.use(K.a);var n=this.$options;n.cy=R()({container:this.$refs.cytoscape,style:[{selector:"node",style:{label:"data(label)"}},{selector:"node.device:selected",style:{"background-color":"#f5e663"}},{selector:"node.device",style:{shape:"round-rectangle"}},{selector:"node.high-signal",style:{"background-color":"#73a580"}},{selector:"node.low-signal",style:{"background-color":"#bc4b51"}}]})},methods:{loadDefinition:function(){var n,e,t=this.$options.engine=new G;t.registerDeviceConstructor(tn),t.registerDeviceConstructor(an),t.registerDeviceConstructor(nn);var i=T(this.definition);t.loadDefinition(i);var a,r=this.$options.cy,s=[],o=t.getLinks(),c=new Set,u=new Map,d=function n(e){if(void 0===e)return 0;if(u.has(e.id))return u.get(e.id);var t=n(e.device)+(e instanceof Q?1:0);return u.set(e.id,t),t},l=parseInt(this.graphDisplayDepth,10),v=Object(j["a"])(o);try{for(v.s();!(a=v.n()).done;){for(var f=a.value,p=f.src,h=f.dst,b=!1,g=0,y=[p,h];g<y.length;g++){var O=y[g];if(d(O)>l){b=!0;break}s.push({group:"nodes",classes:"pin",data:{id:O.id,label:O.name,parent:null===(n=O.device)||void 0===n?void 0:n.id}}),void 0!==O.device&&c.add(O.device)}b||s.push({group:"edges",data:{id:"".concat(p.id," - ").concat(h.id),source:p.id,target:h.id}})}}catch(P){v.e(P)}finally{v.f()}var m=Array.from(c);while(m.length>0){var w=m.pop();void 0===w.device||c.has(w.device)||(c.add(w.device),m.push(w.device))}var k,I=Object(j["a"])(c);try{for(I.s();!(k=I.n()).done;){var D=k.value;s.push({group:"nodes",classes:"device",data:{id:D.id,parent:null===(e=D.device)||void 0===e?void 0:e.id,label:D.name}})}}catch(P){I.e(P)}finally{I.f()}r.startBatch(),r.elements().remove(),r.add(s),r.endBatch(),r.layout(new sn).run(),this.editDefinitionMode=!1},run:function(){var n=this.$options;n.engine.run((function(e){if(!(e instanceof A))return!1;n.cy.startBatch();var t=n.cy.getElementById(e.id);t.removeClass(["high-signal","low-signal"]);var a=e.getSignal();return void 0!==a&&t.addClass(a===i.LOW?"low-signal":"high-signal"),n.cy.endBatch(),!0}),parseInt(this.simulationInterval,10))}}}),cn=on,un=(t("a726"),Object(o["a"])(cn,y,O,!1,null,"07bccaf0",null)),dn=un.exports;a["a"].use(l["a"]);var ln=[{path:"/",name:"About",component:g},{path:"/circuit-simulator",name:"CircuitSimulator",component:dn}],vn=new l["a"]({routes:ln}),fn=vn,pn=t("2f62");a["a"].use(pn["a"]);var hn=new pn["a"].Store({state:{},mutations:{},actions:{},modules:{}});a["a"].config.productionTip=!1,new a["a"]({router:fn,store:hn,render:function(n){return n(d)}}).$mount("#app")},df08:function(n,e,t){}});
//# sourceMappingURL=app.63501550.js.map